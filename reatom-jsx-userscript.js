(function(){"use strict";const Ee=Symbol(),ae=function(e){try{return e(...[].slice.call(arguments,1))}catch(t){return setTimeout(()=>{throw t}),t instanceof Error?t:t=new Error(t)}};function $(e,t){if(e)throw new Error(`Reatom error: ${t}`)}const K=e=>e?.__reatom!==void 0,W=e=>e.subs.size+e.listeners.size>0;function ce(e){$(typeof e!="function",`invalid "${typeof e}", function expected`)}const ye=e=>e.cause===null?e:ye(e.cause);let J;const ze=({callLateEffect:e=ae,callNearEffect:t=ae}={})=>{let o=new WeakMap,n=h=>o.get(h),s=new Set,a=[],l=[],c=!1,b=null,r=[],i=[],p=[],d=0,v=0,g=!1,E=()=>{for(let h of a)t(h,B);a=[]},S=()=>{if(!g){g=!0,E();for(let h of l)e(h,B),a.length>0&&E();l=[],g=!1}},w=({state:h,proto:f,pubs:_,subs:u,listeners:m},A)=>(f.actual=!1,p.push(f.patch={state:h,proto:f,cause:A,pubs:_,subs:u,listeners:m}),f.patch),j=h=>{for(let f of h.subs.keys()){let _=f.patch??n(f);f.patch&&!f.actual||w(_,h).listeners.size===0&&j(_)}},k=(h,f)=>{if(f.subs.delete(h)&&(i.push(()=>f.subs.add(h)),!W(f))){f.proto.disconnectHooks!==null&&a.push(...f.proto.disconnectHooks);for(let _ of f.pubs)k(f.proto,_)}},N=(h,f)=>{if(!f.subs.has(h)){let _=W(f);if(f.subs.add(h),i.push(()=>f.subs.delete(h)),!_){f.proto.connectHooks!==null&&a.push(...f.proto.connectHooks);for(let u of f.pubs)N(f.proto,u)}}},O=(h,f,_)=>{let{patch:u,actual:m}=f,A=_!==void 0;if(!A&&m&&(u.pubs.length===0||W(u)))return u;let P=u??n(f),Oe=!P,Ne=A?h.cause:n(ue);if(Oe)P={state:f.initState(h),proto:f,cause:Ne,pubs:[],subs:new Set,listeners:new Set};else if(f.computer===null&&!A)return P;u&&!m||(u=w(P,Ne));let{state:Ct}=u,G={get:h.get,spy:void 0,schedule:h.schedule,subscribe:h.subscribe,cause:u};try{f.computer&&((F,L)=>{let{proto:Fe,pubs:I}=L,Ie=!1;if(I.length===0||I.some(({proto:z,state:T})=>!Object.is(T,(L.cause=O(F,z)).state))){let z=[];if(F.spy=({__reatom:T},M)=>{if(L.pubs===I){let se=O(F,T),re=z.push(se)<=I.length?I[z.length-1]:void 0,ie=re?.proto!==se.proto;Ie||=ie;let le=T.isAction&&!ie?se.state.slice(re.state.length):se.state;if(!M||!ie&&Object.is(le,re.state))return le;if(T.isAction)for(const vt of le)M(vt);else M(le,ie?void 0:re?.state)}else $(!0,"async spy")},L.state=L.proto.computer(F,L.state),L.pubs=z,(Ie||I.length>z.length)&&W(L)){for(let{proto:T}of I)z.every(M=>M.proto!==T)&&k(Fe,T.patch??n(T));for(let{proto:T}of z)I.every(M=>M.proto!==T)&&N(Fe,T.patch??n(T))}}})(G,u),A&&(u.cause=h.cause,_(G,u)),f.actual=!0}catch(F){throw u.error=F}if(!Object.is(Ct,u.state)&&(u.subs.size>0&&(A||u.listeners.size>0)&&j(u),f.updateHooks)){let F={get:G.get,spy:void 0,schedule:G.schedule,subscribe:G.subscribe,cause:G.cause};f.updateHooks.forEach(L=>r.push(()=>L(F,u)))}return u},B={get(h){if($(J&&ye(J.cause)!==n(ue),"cause collision"),K(h)){let u=h.__reatom;if(c)return O(this,u).state;let m=n(u);return m===void 0||u.computer!==null&&!W(m)?this.get(()=>O(this,u).state):m.state}if($(b!==null,"tr failed"),c)return h(n,O);c=!0,d=a.length,v=l.length;let f=J===void 0;f&&(J=this);try{var _=h(n,O);for(let u=0;u<p.length;u++){let{listeners:m,proto:A}=p[u];if(m.size>0&&O(this,A),r.length>0)for(let P of r.splice(0))P(this)}if(p.length)for(let u of s)u(p);for(let u of p){let{proto:m,state:A}=u;if(m.isAction&&(u.state=[]),u===m.patch)if(m.patch=null,m.actual=!1,o.set(m,u),m.isAction){if(A.length===0)continue;for(let P of u.listeners)a.push(()=>P(A))}else for(let P of u.listeners)l.push(()=>P(n(m).state))}}catch(u){b=u=u instanceof Error?u:new Error(String(u));for(let m of s)m(p,u);for(let m of i)ae(m,u);for(let{proto:m}of p)m.patch=null,m.actual=!1;throw a.length=d,l.length=v,u}finally{c=!1,b=null,r=[],i=[],p=[],d=0,v=0,f&&(J=void 0)}return S(),_},spy:void 0,schedule(h,f=1){return ce(h),$(!this,"missed context"),new Promise((_,u)=>{f===-1?c&&i.push(h):f===0?c&&r.push(()=>h(this)):((f===1?a:l).push(()=>{try{let m=h(this);return m instanceof Promise?m.then(_,u):_(m),m}catch(m){throw u(m),m}}),c||S())})},subscribe(h,f=h){if(ce(f),h===f)return s.add(f),()=>s.delete(f);let{__reatom:_}=h,u=Ee,m=P=>Object.is(u,P)||f(u=P),A=n(_);return A!==void 0&&W(A)?A.listeners.add(m):this.get(()=>{A=O(this,_,(P,Oe)=>{}),A.listeners.add(m),i.push(()=>_.patch.listeners.delete(m)),_.connectHooks!==null&&a.push(..._.connectHooks);for(let P of A.pubs)N(_,P)}),u===Ee&&m((_.patch??n(_)).state),()=>{if(A.listeners.delete(m)&&!W(A)){_.disconnectHooks&&a.push(..._.disconnectHooks);for(let P of A.pubs)k(_,P);c||(i.length=0,S())}}},cause:void 0};return(B.cause=B.get(()=>O(B,ue))).cause=null,B};let We=0,V=e=>`${e}#${++We}`;function Me(){return[].slice.call(arguments).reduce((e,t)=>t(e),this)}function qe(e){const t=(o,n)=>e(o,n.state);return(this.__reatom.updateHooks??=new Set).add(t),()=>this.__reatom.updateHooks.delete(t)}function De(e){return this.onChange((t,o)=>{const{params:n,payload:s}=o[o.length-1];e(t,s,n)})}function C(e,t=V("_atom")){let o=(s,a)=>s.get((l,c)=>c(s,o.__reatom,(b,r)=>{r.state=typeof a=="function"?a(r.state,b):a}).state),n=null;return typeof e=="function"&&(o={},n=e,e=void 0),o.__reatom={name:t,isAction:!1,patch:null,initState:()=>e,computer:n,connectHooks:null,disconnectHooks:null,updateHooks:null,actual:!1},o.pipe=Me,o.onChange=qe,Se.length===0?o:o.pipe(...Se)}const R=(e,t)=>{e!==void 0&&typeof e!="string"||(t=e,e=(n,s)=>s),ce(e);let o=C([],t??V("_action"));return o.__reatom.isAction=!0,o.__reatom.unstable_fn=e,Object.assign(function(){var n=[].slice.call(arguments);let s=o(n[0],(a,l)=>(n[0]=l,[...a,{params:n.slice(1),payload:l.cause.proto.unstable_fn(...n)}]));return s[s.length-1].payload},o,{onCall:De})},Se=[],ue=C(void 0,"root").__reatom,H=()=>{},Y=e=>typeof e=="object"&&e!==null,Be=e=>{if(!Y(e))return!1;const t=Reflect.getPrototypeOf(e);return!t||!Reflect.getPrototypeOf(t)},Ge=(e,t,o=Object.is)=>{if(Object.is(e,t))return!0;if(!Y(e)||!Y(t)||e.__proto__!==t.__proto__||e instanceof Error)return!1;if(Symbol.iterator in e){let n=e instanceof Map?(l,c)=>o(l[0],c[0])&&o(l[1],c[1]):o,s=e[Symbol.iterator](),a=t[Symbol.iterator]();for(;;){let l=s.next(),c=a.next();if(l.done||c.done||!n(l.value,c.value))return l.done&&c.done}}if(e instanceof Date)return e.getTime()===t.getTime();if(e instanceof RegExp)return String(e)===String(t);for(let n in e)if(n in t==0||!o(e[n],t[n]))return!1;return Object.keys(e).length===Object.keys(t).length},de=Object.assign,Q=function(){return Object.assign({},...[].slice.call(arguments))},Je=(e=0,t=Number.MAX_SAFE_INTEGER-1)=>Math.floor(Math.random()*(t-e+1))+e,{toString:Ue}=Object.prototype,q=e=>{if(e instanceof Error==0||e.name!=="AbortError"){if(e instanceof Error){var t={cause:e};e=e.message}else e=Y(e)?Ue.call(e):String(e);typeof DOMException>"u"?(e=new Error(e,t)).name="AbortError":e=de(new DOMException(e,"AbortError"),t)}return e},fe=e=>{if(e?.signal.aborted)throw q(e.signal.reason)},we=e=>e instanceof Error&&e.name==="AbortError",Xe=(e,t=globalThis.window)=>{let o,n=new WeakMap,s={},a="",l=(r,i,p)=>{if(i.startsWith("on:"))i=i.slice(3),p=R(p,`${a}.${r.nodeName.toLowerCase()}.${i}`),r.addEventListener(i,d=>p(e,d));else if(i.startsWith("css:"))i="--"+i.slice(4),p==null?r.style.removeProperty(i):r.style.setProperty(i,String(p));else if(i==="css"){o??=t.document.getElementById("reatom-jsx-styles"),o||(o=t.document.createElement("style"),o.id="reatom-jsx-styles",t.document.head.appendChild(o));let d=s[p];d||(d=s[p]="reatom-"+Je(),o.innerText+="."+d+"{"+p+`}
`),r.classList.add(d)}else if(i==="style"&&typeof p=="object")for(const d in p)p[d]==null?r.style.removeProperty(d):r.style.setProperty(d,p[d]);else i.startsWith("prop:")?r[i.slice(5)]=p:(i.startsWith("attr:")&&(i=i.slice(5)),p==null?r.removeAttribute(i):r.setAttribute(i,String(p)))},c=(r,i)=>{Promise.resolve().then(()=>{if(r.isConnected)for(;r.parentElement&&!n.get(r)?.push(i);)r=r.parentElement;else i()})},b=()=>{};return{h:function(r,i){var p=[].slice.call(arguments,2);if(r===b)return p;if(typeof r=="function"){(i??={}).children=p;let g=r.name;try{return a=r.name,r(i)}finally{a=g}}let d=r.startsWith("svg:")?t.document.createElementNS("http://www.w3.org/2000/svg",r.slice(4)):t.document.createElement(r);for(let g in i){let E=i[g];if(K(E)&&!E.__reatom.isAction){if(g.startsWith("model:")){let w=g=g.slice(6);l(d,"on:input",(j,k)=>{E(j,w==="valueAsNumber"?+k.target.value:k.target[w])}),g==="valueAsNumber"&&(g="value"),g="prop:"+g}let S;S=e.subscribe(E,w=>!S||d.isConnected?g==="$spread"?Object.entries(w).forEach(([j,k])=>l(d,j,k)):l(d,g,w):S()),c(d,S)}else l(d,g,E)}let v=g=>{if(Array.isArray(g))g.forEach(v);else if(K(g)){let E,S=t.document.createTextNode("");E=e.subscribe(g,w=>{if(E&&!S.isConnected)E();else if($(Array.isArray(w),"array children are not supported"),w instanceof t.HTMLElement){let j=n.get(w);j||n.set(w,j=[]),E&&d.replaceChild(w,S),S=w}else S.textContent=w}),c(d,E),d.appendChild(S)}else d.appendChild(g?.nodeType?g:t.document.createTextNode(String(g)))};return p.forEach(v),d},hf:b,mount:(r,i)=>{Array.isArray(i)?r.append(...[i].flat(1/0)):r.appendChild(i),new t.MutationObserver(p=>{for(let d of p)for(let v of d.removedNodes){let g=n.get(v);g&&(g.forEach(E=>E()),n.delete(v))}}).observe(r,{childList:!0,subtree:!0})}}},Ke=ze(),{h:y,hf:Ve,mount:Ye}=Xe(Ke);function Qe(e,t){try{var o=e()}catch(n){return t(n)}return o&&o.then?o.then(void 0,t):o}class Ae extends WeakMap{has(t){return super.has(t)||t.cause!==null&&this.has(t.cause)}get(t){for(;!super.has(t)&&t.cause;)t=t.cause;return super.get(t)}}const Z=new Ae,Ce=e=>Z.get(e)??null,pe=(e,t)=>{const o=Ce(e.cause);if(o){const n=()=>t(q(o.signal.reason)),s=()=>o.signal.removeEventListener("abort",n);if(!o.signal.aborted)return o.signal.addEventListener("abort",n),e.schedule(()=>o.signal.removeEventListener("abort",n),-1),s;n()}},me=new WeakMap,x=(e,t,o,n)=>{let s=me.get(t);if(!s){const a=t.then(l=>(e.get((c,b)=>s.then.forEach(r=>r(l,c,b))),l),l=>{throw e.get((c,b)=>s.catch.forEach(r=>r(l,c,b))),we(l)&&a.catch(H),l});me.set(t,s={promise:a,then:[],catch:[]}),me.set(a,s)}return o&&s.then.push(o),n&&s.catch.push(n),s.promise},ve=e=>{const{schedule:t}=e;return Q(e,{schedule(o,n){const s=this;if(n===-1)return t.call(this,o,n);let a,l;const c=new Promise((r,i)=>{a=r,l=i}),b=pe(this,r=>{c.catch(H),l(r)});return t.call(this,function(r){try{let i=function(){b?.()};const p=Ce(s.cause),d=Qe(function(){return fe(p),Promise.resolve(o(r)).then(function(v){fe(p),a(v)})},function(v){l(v)});return Promise.resolve(d&&d.then?d.then(i):i())}catch(i){return Promise.reject(i)}},n),c}})},ee=e=>e.cause===null?e:ee(e.cause),Ze=(e,t)=>ee(e.cause)===ee(t.cause),xe=(e,t)=>(e.__reatom.connectHooks??=new Set).add(t),et=(e,t)=>(e.__reatom.disconnectHooks??=new Set).add(t),tt=e=>t=>{const{initState:o,isAction:n}=t.__reatom;return $(n,"action state is not manageable"),t.__reatom.initState=s=>e(s,o),t},te=(e,t)=>{const o=s=>{const a=Q(s.get(i=>i(e.__reatom)),{cause:ee(s.cause)}),l=new AbortController;Z.set(a,l);const c=t(Q(s,{cause:a,controller:l,isConnected:()=>ot(s,e)}));c instanceof Promise&&c.catch(H);const b=i=>{Ze(s,i)&&r.delete(b)&&n.has(o)&&(l.abort(q(`${e.__reatom.name} disconnect`)),typeof c=="function"&&c())},r=et(e,b)},n=xe(e,o);return()=>n.delete(o)},ot=(e,{__reatom:t})=>e.get(o=>{const n=t.patch??o(t);return!!n&&n.subs.size+n.listeners.size>0}),nt=C(null,"initializations");nt.__reatom.initState=()=>new WeakMap;const Pe=e=>t=>Object.keys(e).reduce((o,n)=>(o[n]=R(function(s){return o(s,e[n](s.get(o),...[].slice.call(arguments,1)))},`${o.__reatom.name}._${n}`),o),t),st=(e,t,{shouldPending:o=!0,shouldFulfill:n=!0,shouldReject:s=!0,effect:a=e.__reatom.unstable_fn}={})=>{const l=e.pendingAtom,[c]=t;o&&l(c,r=>++r);const b=c.schedule(()=>new Promise((r,i)=>{fe(c.controller),a(...t).then(r,i),c.controller.signal.addEventListener("abort",()=>i(q(c.controller.signal.reason)))}));return de(x(c,b,r=>{n&&e.onFulfill(c,r),o&&l(c,i=>--i)},r=>{s&&!we(r)&&e.onReject(c,r),o&&l(c,i=>--i)}),{controller:c.controller})},he=e=>t=>{const o=e(t);return Ge(t,o)?t:o},je={isPending:!1,isFulfilled:!1,isRejected:!1,isSettled:!1,isFirstPending:!1,isEverPending:!1,isEverSettled:!1},rt=()=>e=>{if(!e.statusesAtom){const t=C(new WeakSet,`${e.__reatom.name}.statusesAtom._relatedPromisesAtom`),o=C(je,`${e.__reatom.name}.statusesAtom`);o.__reatom.computer=(n,s)=>(n.spy(e,({payload:a})=>{n.get(t).add(a),s=he(l=>({isPending:n.get(e.pendingAtom)>0,isFulfilled:!1,isRejected:!1,isSettled:!1,isFirstPending:!l.isEverSettled,isEverPending:!0,isEverSettled:l.isEverSettled}))(s)}),s),e.statusesAtom=Object.assign(o,{reset:R(n=>(t(n,new Set),o(n,je)))}),e.onCall((n,s)=>{n.get(o),x(n,s,()=>{n.get(t).has(s)&&o(n,he(()=>{const a=n.get(e.pendingAtom)>0;return{isPending:a,isFulfilled:!a,isRejected:!1,isSettled:!a,isFirstPending:!1,isEverPending:!0,isEverSettled:!0}}))},()=>{n.get(t).has(s)&&o(n,he(()=>{const a=n.get(e.pendingAtom)>0;return{isPending:a,isFulfilled:!1,isRejected:!a,isSettled:!a,isFirstPending:!1,isEverPending:!0,isEverSettled:!0}}))})})}return e},ge=new WeakSet,it=(e,t=V("asyncAtom"))=>{const o=new Ae,n=be(l=>{const c=o.get(l.cause);return $(!c,"reaction manual call"),c},t),s=C((l,c)=>{if(c&&!l.cause.pubs.length)return c;const b=[],r=Q(l,{spy(j,k){$(k,"spy reactions are unsupported in AsyncReaction");const N=l.spy(j);return b.push(N),N}}),i=new AbortController,p=pe(r,j=>i.abort(j));p&&i.signal.addEventListener("abort",p),Z.set(r.cause,r.controller=i);const d=e(ve(r));d.catch(H),o.set(r.cause,d);const v=r.get(n.pendingAtom),g=r.get(n.onFulfill);let E=n(r,...b);E.controller.signal.addEventListener("abort",()=>{a.cacheAtom?.options.ignoreAbort||i.abort(E.controller.signal.reason)});const S=v===r.get(n.pendingAtom),w=r.get(n.onFulfill);return S&&i.abort(q("cached")),S&&g!==w&&(E=Object.assign(Promise.resolve(w[w.length-1].payload),{controller:i})),x(r,E,()=>ge.add(E),()=>ge.add(E)).catch(H),c?.controller.abort(q("concurrent")),E},`${t}._promiseAtom`);te(n,l=>l.subscribe(s,H)),te(s,l=>()=>{const c=l.get(s);c.controller.abort(l.controller.signal.reason),ge.has(c)||ke(l,s.__reatom)});const a=Object.assign(l=>l.get((c,b)=>{ke(l,s.__reatom),b(l,s.__reatom,H);const r=l.get(n),i=r[r.length-1]?.payload;return $(!i,"unexpectedly failed invalidation. Please, report the issue"),i}),n,{promiseAtom:s,init:l=>l.subscribe(s,H)});return Object.defineProperty(n,"_handleCache",{get:()=>a._handleCache}),a},ke=(e,t)=>e.get((o,n)=>{n(e,t,(s,a)=>{a.pubs=[],a.state=void 0})}),be=(e,t={})=>{const{name:o=V("async"),onEffect:n,onFulfill:s,onReject:a,onSettle:l}=typeof t=="string"?{name:t}:t,c=C(0,`${o}.pendingAtom`),b=Object.assign(function(){var d=[].slice.call(arguments);return d[0].get((v,g)=>{const{state:E}=g(d[0],b.__reatom,(S,w)=>{Z.set(S.cause,S.controller=new AbortController);const j=pe(d[0],N=>{k?.catch(H),S.controller.abort(N)});j&&S.controller.signal.addEventListener("abort",j),d[0]=ve(S);var k=b._handleCache?b._handleCache(...d):st(b,d);x(S,k,void 0,()=>{i.__reatom.updateHooks.size>1&&k.catch(H)}),w.state=[...w.state,{params:d.slice(1),payload:k}]});return E[E.length-1].payload})},R(e,o)),r=R(`${o}.onFulfill`),i=R(`${o}.onReject`),p=R(`${o}._onSettle`);return r.onCall(d=>p(d)),i.onCall(d=>p(d)),n&&b.onCall((d,v,g)=>n(d,g,v)),s&&r.onCall(s),a&&i.onCall(a),l&&p.onCall(l),te(c,d=>d.subscribe(b,H)),de(b,{onFulfill:r,onReject:i,onSettle:p,pendingAtom:c})};be.from=(e,t={})=>(e.name.length>2&&(typeof t=="object"?t.name??=e.name:t??=e.name),be(function(o){return e(...[].slice.call(arguments,1))},t));const lt=(e,t)=>o=>{if(!o.dataAtom){const n=o.dataAtom=Object.assign(C(e,`${o.__reatom.name}.dataAtom`),{reset:R(s=>{n(s,e)},`${o.__reatom.name}.dataAtom.reset`),mapFulfill:t});n.__reatom.computer=(s,a)=>(s.spy(o.onFulfill,({payload:l})=>{a=t?t(s,l,a):l}),a),o.onFulfill.onCall(s=>{s.get(n)}),te(n,s=>s.subscribe(o,H))}return o},U=(e,t)=>{for(;K(t);)t=e.spy?e.spy(t):e.get(t);if(typeof t!="object"||t===null)return t;if(Be(t)){const o={};for(const n in t)o[n]=U(e,t[n]);return o}if(Array.isArray(t)){const o=[];for(const n of t)o.push(U(e,n));return o}if(t instanceof Map){const o=new Map;for(const[n,s]of t)o.set(n,U(e,s));return o}if(t instanceof Set){const o=new Set;for(const n of t)o.add(U(e,n));return o}return t},at=C(null);at.__reatom.initState=()=>new WeakMap;const Te=16,X=C(Te,"countAtom").pipe(Pe({increment:e=>e+1,decrement:e=>e-1,reset:()=>Te})),ct=["get","post","put","patch","delete","head","options"];class ut extends Error{response;data;constructor({message:t,response:o,data:n}){super(t),this.name="FetchError",this.response=o,this.data=n}}function dt(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}function ft(...e){const t={};for(const o of e){const n=new Headers(o);for(const[s,a]of n.entries())t[s]=a}return new Headers(t)}class _e{#t;#e;get;post;put;patch;delete;head;options;constructor(t,o={}){this.#t=t,this.#e=o;for(const n of ct)this[n]=(s,a)=>this.request(s,{...a,method:n})}extends(t,o){const n=this.fetcherParameters(t,o);return new _e(...n)}async request(t,o){o?.params&&(t=this.pathParams(t,o.params),delete o.params);const n=this.fetcherParameters(t,o);return await pt(...n)}fetcherParameters(t,o){const n=dt(this.#t,t),s=ft(this.#e.headers,o?.headers),a={...this.#e,...o,headers:s};return[n,a]}pathParams(t,o){for(const[n,s]of Object.entries(o))t=t.replace(`:${n}`,`${s}`);return t}}async function pt(...e){const t=await fetch(...e),o=await t.json();if(!t.ok)throw new ut({message:t.statusText,response:t,data:o});return o}const mt=new _e("https://jsonplaceholder.typicode.com").extends("posts"),oe=C(1,"todoPageAtom").pipe(Pe({nextTodo:e=>e+1,prevTodo:e=>Math.max(1,e-1)})),He=it(e=>{const t=e.spy(oe);return e.schedule(()=>mt.get(`${t}`,e.controller))},"todoResource").pipe(lt(null),rt()),ht=C(e=>e.spy(He.dataAtom)?.title,"todoAtom"),gt=C(e=>e.spy(He.statusesAtom).isPending,"todoIsLoadingAtom"),bt=C(e=>e.spy(X)+"px","fontSizeAtom");function _t(){return y("div",null,y("h1",{css:"font-size: var(--size)","css:size":bt},"Demo ",X),y("button",{"on:click":X.increment},"Increment"),y("button",{"on:click":X.decrement},"Decrement"),y("button",{"on:click":X.reset},"Reset"),y("hr",null),y("button",{"on:click":oe.prevTodo},"Prev"),y("button",{"on:click":oe.nextTodo},"Next"),y("h1",null,"Page: ",oe),C(e=>y("span",null,e.spy(gt)?"Loading...":y("pre",null,ht))))}const ne=C("","inputAtom"),Re="todos";function Et(){const e=localStorage.getItem(Re);return e?JSON.parse(e).map(o=>Le(o.title,o.completed)):[]}const $e=R(e=>{const t=JSON.stringify(U(e,D));localStorage.setItem(Re,t)},"toLocalStorage"),D=C([],"todosAtom").pipe(tt(Et));D.onChange($e);function Le(e,t){const o=C(t,`completed#${e}`);return o.onChange($e),{title:e,completed:o}}const yt=R((e,t)=>{t.preventDefault();const o=e.get(ne);if(!o){alert("Title is required");return}if(e.get(D).find(s=>s.title===o)){alert("Todo already exists");return}D(e,s=>[...s,Le(o,!1)]),ne(e,"")},"addTodo"),St=R(e=>{D(e,[]),ne(e,"")},"clearTodos");function wt(){return y("div",null,y("h1",null,"Todo List"),y("form",{"on:submit":yt},y("input",{required:!0,autofocus:!0,"model:value":ne}),y("button",null,"Add"),y("button",{type:"button","on:click":St},"Clear")),C(e=>y("ul",null,e.spy(D).map(t=>y("li",null,y("span",null,t.title),y("input",{type:"checkbox","model:checked":t.completed}))))))}function At(){return y(Ve,null,y(_t,null),y(wt,null))}Ye(document.body,y(At,null))})();
